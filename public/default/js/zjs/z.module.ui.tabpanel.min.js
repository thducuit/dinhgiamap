zjs.require("ui",function(){zjs.extendCore({moduleUiTabpanelOption:{childclass:"div",autoheight:!1,transition:0,activetab:0,useurlhash:!1}});var m=0,q=function(c,b){function e(a){if(0!=a.count()&&!h){a.is("ul")||(a=a.find("ul").item(0));h=a.addClass("zui-tabpanel-nav-wrapper");l&&h.addClass("zui-tabpanel-nav-wrapper-bottom");var g=0;h.child().each(function(a){3==a.nodeType&&zjs(a).remove();zjs(a).is("li")&&zjs(a).setAttr("data-tabindex",g++).click(function(a,g){k(c,this.attr("data-tabindex").toInt())})})}}
var d=zjs(c),a=d.getData("zmoduleuitabpaneloption");if(a)d.setData("zmoduleuitabpaneloption",zjs.extend(a,b));else{var a=zjs.clone(zjs.moduleUiTabpanelOption),f=d.getAttr("data-option","");zjs.isString(f)&&""!=f.trim()&&(a=zjs.extend(a,f.jsonDecode()));d.removeAttr("data-option");"undefined"!=typeof b&&(a=zjs.extend(a,b));"none"==a.transition&&(a.transition=0);if("fade"==a.transition||"fadein"==a.transition)a.transition=1;"horizontal"==a.transition&&(a.transition=2);"vertical"==a.transition&&(a.transition=
3);3<a.transition.toInt()&&(a.transition=0);zjs.isNumeric(a.activetab)||(a.activetab=0);a.useurlhash=!!a.useurlhash;d.setData("zmoduleuitabpaneloption",a);d.addClass("zui-tabpanel").setData("zmoduleuitabpanelcontentwrapid",zjs.getUniqueId());a.autoheight&&d.addClass("zui-tabpanel-autoheight");var h=!1,g=zjs('<div class="zui-tabpanel-content-wrapper"></div>').setData("zmoduleuitabpanelcontentwrapid",zjs.getUniqueId()),l=!1;d.child().each(function(c){var b=zjs(c);!b.is("ul")&&!b.is(".ztabpaneltabs")||
h||e(b);if(b.is(a.childclass+":not(.ztabpaneltabs)")){if(0<b.find(".ztabpaneltabs").count()){var f=b.find(".ztabpaneltabs").item(0).findUp(".ztabpanel").item(0,!0);if(d.item(0,!0)==f)return}l||(l=!0,g.insertBefore(b));zjs('<div class="zui-tabpanel-content"></div>').appendTo(g).append(c);c=zjs(c).getData("zmodulescrollbarcontentel");!a.autoheight&&"undefined"!=typeof zjs.moduleScrollbar&&c&&c.scrollbarSetWrapperSizeElement(g)}});var n=!1,f=function(){var b=0;g.child().each(function(a,c){var g=zjs(a);
n||g.setAttr("data-tabindex",c).style("z-index",m++);g.height()>b&&(b=g.height())});a.autoheight||g.height(b);0<b&&g.trigger("resize",{});n=!0;return b};0>=f()&&f.delay(500);d.setData("zmoduleuitabpanelnavwrapel",h);d.setData("zmoduleuitabpanelcurrindex",-1);f=!1;a.useurlhash&&(f=p(c),zjs(window).on("hashchange",function(a){p(c)}));f||k(c,a.activetab);d.trigger("ui.tabpanel.load")}},p=function(c){if(""!=document.location.hash){var b=zjs(c),e=b.getData("zmoduleuitabpaneloption");if(e&&e.useurlhash){var e=
!1,d=b.find('[data-name="'+document.location.hash.substr(1)+'"]');0>=d.count()&&(d=b.find("#"+document.location.hash.substr(1)));0<d.count()&&(b=parseInt(d.getAttr("data-tabindex",-1)),0<=b&&(k(c,b),e=!0));return e}}},k=function(c,b){var e=zjs(c),d=e.getData("zmoduleuitabpaneloption");if(d){var a=e.getData("zmoduleuitabpanelcurrindex",0);if(b!=a){var a=e.find(".zui-tabpanel-content-wrapper").item(0),f=a.getData("zmoduleuitabpanelcontentwrapid"),h="";a.find(".zui-tabpanel-content").each(function(a){a=
zjs(a);if(a.findUp(".zui-tabpanel-content-wrapper").getData("zmoduleuitabpanelcontentwrapid")==f){var c=a.getAttr("data-tabindex",0).toInt();b!=c?a.removeClass("zui-active"):a.addClass("zui-active").style("z-index",m++)}});(a=e.getData("zmoduleuitabpanelnavwrapel",!1))&&a.find("> li").each(function(a){a=zjs(a);var c=a.attr("data-tabindex").toInt();b!=c?a.removeClass("zui-active"):(a.addClass("zui-active"),h=a.getAttr("data-name",""),""==h&&(h=a.getAttr("id","")))});e.setData("zmoduleuitabpanelcurrindex",
b);d.useurlhash&&""!=h&&(document.location.hash=h);e.trigger("ui.tabpanel.change",{index:b})}}};zjs.extendMethod({makeTabpanel:function(c){return this.each(function(b){q(b,c)})},tabpanelSelectTab:function(c){return this.each(function(b){k(b,c)})},tabpanelSelectNextTab:function(){return this.each()},tabpanelSelectPrevTab:function(){return this.each()}});zjs.hook({after_setInnerHTML:function(c){zjs(c).find(".ztabpanel").makeTabpanel()},after_insertDOM:function(c){zjs(c).hasClass("ztabpanel")&&zjs(c).makeTabpanel();
zjs(c).find(".ztabpanel").makeTabpanel()}});zjs.onready(function(){zjs(".ztabpanel").makeTabpanel()});"required"in zjs&&zjs.required("ui.tabpanel")});